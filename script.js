let score = 0;
const words = [
  "should",
  "river",
  "side",
  "thing",
  "let",
  "saw",
  "know",
  "was",
  "after",
  "both",
  "food",
  "good",
  "can",
  "she",
  "being",
  "sea",
  "school",
  "school",
  "into",
  "mile",
  "well",
  "to",
  "mile",
  "take",
  "still",
  "does",
  "big",
  "first",
  "through",
  "above",
  "have",
  "point",
  "because",
  "big",
  "miss",
  "life",
  "point",
  "and",
  "man",
  "work",
  "something",
  "been",
  "family",
  "small",
  "through",
  "much",
  "too",
  "my",
  "him",
  "eye",
  "turn",
  "number",
  "were",
  "new",
  "these",
  "quick",
  "car",
  "four",
  "have",
  "girl",
  "large",
  "plant",
  "get",
  "it",
  "learn",
  "add",
  "there",
  "both",
  "few",
  "sometimes",
  "close",
  "help",
  "your",
  "look",
  "above",
  "but",
  "even",
  "old",
  "word",
  "it",
  "could",
  "always",
  "not",
  "example",
  "try",
  "how",
  "kind",
  "great",
  "away",
  "well",
  "quickly",
  "us",
  "spell",
  "white",
  "together",
  "may",
  "will",
  "still",
  "leave",
  "second",
  "his",
  "its",
  "your",
  "begin",
  "no",
  "keep",
  "important",
  "does",
  "America",
  "way",
  "even",
  "song",
  "school",
  "being",
  "like",
  "girl",
  "answer",
  "tell",
  "form",
  "life",
  "earth",
  "our",
  "story",
  "she",
  "this",
  "when",
  "side",
  "soon",
  "an",
  "quick",
  "almost",
  "often",
  "own",
  "air",
  "all",
  "run",
  "his",
  "near",
  "change",
  "family",
  "came",
  "and",
  "later",
  "hear",
  "white",
  "like",
  "young",
  "of",
  "made",
  "hard",
  "want",
  "learn",
  "another",
  "last",
  "study",
  "up",
  "try",
  "these",
  "state",
  "could",
  "America",
  "hand",
  "tell",
  "small",
  "along",
  "call",
  "young",
  "call",
  "mile",
  "just",
  "my",
  "until",
  "country",
  "him",
  "earth",
  "will",
  "let",
  "end",
  "city",
  "paper",
  "story",
  "hard",
  "near",
  "form",
  "oil",
  "state",
  "talk",
  "people",
  "last",
  "any",
  "are",
  "way",
  "away",
  "add",
  "land",
  "under",
  "open",
  "by",
  "great",
  "book",
  "find",
  "mean",
  "sometimes",
  "try",
  "another",
  "why",
  "end",
  "young",
  "later",
  "say",
  "food",
  "question",
  "Indian",
  "under",
  "learn",
  "at",
  "come",
  "also",
  "said",
  "an",
  "what",
  "miss",
  "let",
  "other",
  "that",
  "find",
  "want",
  "begin",
  "sentence",
  "mountain",
  "name",
  "eat",
  "sea",
  "before",
  "those",
  "almost",
  "out",
  "second",
  "two",
  "his",
  "why",
  "very",
  "give",
  "in",
  "around",
  "number",
  "change",
  "back",
  "while",
  "they",
  "end",
  "again",
  "came",
  "like",
  "know",
  "line",
  "keep",
  "something",
  "two",
  "eye",
  "very",
  "seem",
  "both",
  "some",
  "on",
  "mother",
  "off",
  "between",
  "sea",
  "by",
  "live",
  "little",
  "use",
  "seem",
  "few",
  "been",
  "sound",
  "said",
  "at",
  "begin",
  "book",
  "me",
  "their",
  "work",
  "does",
  "tree",
  "the",
  "soon",
  "water",
  "put",
  "spell",
  "word",
  "on",
  "are",
  "know",
  "watch",
  "is",
  "follow",
  "always",
  "grow",
  "after",
  "set",
  "picture",
  "is",
  "who",
  "why",
  "follow",
  "sentence",
  "river",
  "day",
  "man",
  "idea",
  "is",
  "paper",
  "as",
  "oil",
  "do",
  "also",
  "this",
  "hard",
  "point",
  "here",
  "place",
  "until",
  "along",
  "need",
  "often",
  "little",
  "on",
  "between",
  "stop",
  "while",
  "father",
  "what",
  "right",
  "boy",
  "see",
  "took",
  "don",
];
let currentWord = 0;
let currentTime = 10;
const word = document.getElementById("word");
const timer = document.getElementById("time");
const text = document.getElementById("text");
const scoreNode = document.getElementById("score");
const diff = document.getElementById("difficulty");
const end = document.getElementById('end-game-container');
const settingBtn = document.getElementById('settings-btn');
const setting = document.getElementById('settings');
const gameInit = () => {
  diff.addEventListener('change', (e)=>{
    localStorage.setItem('level' , e.target.value);
  } )
  diff.selectedIndex = localStorage.getItem('level');
  showWord();
  setInterval(timerChange, 1000);
  settingBtn.addEventListener('click' , () => {
    setting.classList.toggle('hide');
  })
  text.addEventListener("input", changeEvent);
};
const changeEvent = (e) => {
  if (e.target.value === words[currentWord]) {
    score++;
    wordChange();
  }
};
const updateTime = (T)=>{
  timer.textContent = T + "s";

}
const timerChange = () => {
  currentTime--;
  updateTime(currentTime);
  if(currentTime==(-1)) endGame();
};
const showWord = ()=>{
  currentWord = Math.floor(Math.random() * 340);
  words.splice(currentWord , 1);
  word.textContent = words[currentWord];
}
const wordChange = () => {
  showWord();
  text.value = "";
  switch (diff.value) {
    case "0":
      currentTime += 4;
      break;
    case "1":
      currentTime += 3;
      break;
    case "2":
      currentTime += 2;
      break;
  }
  updateTime(currentTime);
  text.classList.toggle('correct');
  setTimeout(()=>{text.classList.toggle('correct')} , 500)
  scoreNode.textContent = score;
};

const endGame =()=>{
    end.innerHTML = `
    <h1>Times up</h1>
    <p>Your Score is ${score}</p>
    <button onclick="location.reload()">Try Again</button>
    `
    end.style.display = 'flex';
    clearInterval(timerChange);
}
gameInit();
